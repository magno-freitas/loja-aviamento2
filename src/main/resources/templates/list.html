<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Usuários</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="text"], input[type="email"] { 
            width: 300px; padding: 8px; border: 1px solid #ddd; 
        }
        .btn { padding: 10px 20px; margin: 5px; text-decoration: none; }
        .btn-primary { background-color: #007bff; color: white; border: none; }
        .btn-secondary { background-color: #6c757d; color: white; }
    </style>
</head>
<body>
<h1>Usuários</h1>

<table>
  <thead>
    <tr>
      <th>Nome</th>
      <th>E-mail</th>
      <th>Ações</th>
    </tr>
  </thead>
  <tbody>
    <tr th:each="p : ${usuarios}">
      <td th:text="${p.nome}">Nome</td>
      <td th:text="${p.email}">Email</td>
      <td>
        <div sec:authorize="hasRole('ADMIN')">
          <a th:href="@{/editar/{id}(id=${p.id})}" class="btn btn-warning btn-sm">Editar</a>
          <a th:href="@{/excluir/{id}(id=${p.id})}" class="btn btn-danger btn-sm"
             onclick="return confirm('Tem certeza que deseja excluir?')">Excluir</a>
        </div>
        <span sec:authorize="hasRole('USER') and !hasRole('ADMIN')">Sem permissão</span>
      </td>
    </tr>
    <tr th:if="${#lists.isEmpty(usuarios)}">
      <td colspan="3">Nenhum usuário cadastrado.</td>
    </tr>
  </tbody>
</table>

<div sec:authorize="hasRole('ADMIN')">
  <p><a th:href="@{/form}" class="btn btn-primary">Cadastrar novo</a></p>
</div>
</body>
</html>